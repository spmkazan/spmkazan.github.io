"use strict";var Sender={email:function(e,n){var i="";e.quizes.forEach(function(e){e.answers.forEach(function(e){"checked"===e.checked&&(i+=" "+e.answer+",")})});var s=window.atob("aHR0cHM6Ly9nZXRzaW1wbGVmb3JtLmNvbS9tZXNzYWdlcz9mb3JtX2FwaV90b2tlbj0yNTE5NDA0MDAwM2RhMzJkNTU3YWZiMjQ1ODUxNzgzZA==");fetch(""+s,{credentials:"same-origin",mode:"no-cors",method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"phone="+n+"&quize="+i.slice(0,-1)}).catch(function(e){return console.log(e)})},sms:function(e){var n=window.atob("aHR0cHM6Ly9zbXMucnUvc21zL3NlbmQ/YXBpX2lkPTMyNURDMUUyLUQ4NjktQkZFMC0wMkFDLTNDM0I3RkEzODI4Qg=="),i=window.atob("NzkxNzIyMDQzMjQ=");fetch(""+n,{credentials:"same-origin",mode:"no-cors",method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"to="+i+"&msg=Заявка из квиза: "+e+"&json=1"}).catch(function(e){return console.log(e)})}},Quize=function(){var e={quizes:[{id:0,question:"Какая продукция вас интересует ?",answers:[{id:1,answer:"Пластиковые окна",checked:""},{id:2,answer:"Алюминиевые окна",checked:""},{id:3,answer:"Пластиковые двери",checked:""},{id:4,answer:"Входные группы",checked:""},{id:5,answer:"Зенитные Фонари",checked:""}],progress:0},{id:1,question:"Куда понадобится установка ?",answers:[{id:1,answer:"Картира",checked:""},{id:2,answer:"Загородный дом",checked:""},{id:3,answer:"Офис",checked:""},{id:4,answer:"Производственный объект",checked:""},{id:5,answer:"Другое",checked:""}],progress:20},{id:2,question:"Из какого материала построено строение ?",answers:[{id:1,answer:"Кирпич",checked:""},{id:2,answer:"Панели",checked:""},{id:3,answer:"Дерево",checked:""},{id:4,answer:"Газобетон",checked:""},{id:5,answer:"Другое",checked:""}],progress:40},{id:3,question:"Вам нужен монтаж ?",answers:[{id:1,answer:"Да",checked:""},{id:2,answer:"Нет",checked:""}],progress:60},{id:4,question:"Вам нужна доставка ?",answers:[{id:1,answer:"Да",checked:""},{id:2,answer:"Нет",checked:""}],progress:80}],quizeIndex:0};return{show:function(){return e},updateQuizeIndex:function(n){e.quizeIndex+=n},clearAnswersQuize:function(n){e.quizes[n].answers.forEach(function(e){e.checked=""})},checkedQuize:function(n,i){Quize.clearAnswersQuize(n),e.quizes[n].answers[i-1].checked="checked"},clearAllData:function(){e.quizeIndex=0,e.quizes.forEach(function(e,n){Quize.clearAnswersQuize(n)})}}}(),QuizeUI=function(){var e={quizeQuestion:".quize-question",progressBarTitle:".quize-progress-bar-title span",progress:"progress",quizeAnswers:".quize-answers",sliderButtons:"button.slider-quiz",quizeModal:".quizmodal",closeModalQuiz:".quize-close",nextButtonQuiz:".quize-next",backButtonQuiz:".quize-back",quizeAnswer:".quize-answer",quizeRadio:".quize-radio",quizeLeft:".quize-left",quizeId:"#quize-left",quizeForm:".quize-form",quizePhone:".quize-form-phone",quizeInfo:".quizeModalInfo.modal span.close",quizeModalInfo:".quizeModalInfo"};return{getSelectors:function(){return e},showTitleQuize:function(n,i){document.querySelector(e.quizeQuestion).textContent=n[i].question,document.querySelector(e.quizeQuestion).setAttribute("id",n[i].id)},showProgressQuize:function(n,i){document.querySelector(e.progress).value=n[i].progress,document.querySelector(e.progressBarTitle).textContent=n[i].progress+"%"},showRadioButtons:function(n,i){var s="";n[i].answers.forEach(function(e){s+='\n          <label class="quize-answer">\n            <input class="quize-radio" type="radio" value="'+e.id+'" name="radio" '+e.checked+'/>\n            <span class="quize-check"> </span>\n            <span class="quize-answer-text"> '+e.answer+" </span>\n          </label>\n        "}),document.querySelector(e.quizeAnswers).innerHTML=s},openModalQuize:function(){document.querySelector(e.quizeModal).style.display="block"},closeModalQuize:function(){document.querySelector(e.quizeModal).style.display="none"},enableButtonNext:function(){document.querySelector(e.nextButtonQuiz).disabled=!1},disableButtonNext:function(){document.querySelector(e.nextButtonQuiz).disabled=!0},showButtonBack:function(){document.querySelector(e.backButtonQuiz).style.visibility="visible"},hideButtonBack:function(){document.querySelector(e.backButtonQuiz).style.visibility="hidden"},EmptyRadioButton:function(){QuizeUI.disableButtonNext();for(var n=document.querySelectorAll(e.quizeRadio),i=0;i<n.length;i++)n[i].checked&&QuizeUI.enableButtonNext()},clearStyleAnswer:function(){for(var n=document.querySelectorAll(e.quizeAnswer),i=0;i<n.length;i++)n[i].style.border="1px solid #d9d8e6"},borderColorRadioButton:function(n){var i=n.target,s=document.querySelector(e.quizeQuestion).getAttribute("id");if(i.classList.contains("quize-answer")){QuizeUI.clearStyleAnswer(),i.style.border="1px solid #f6bf08";var o=i.querySelector(".quize-radio").value;Quize.checkedQuize(s,o)}if(i.classList.contains("quize-answer-text")||i.classList.contains("quize-check")){QuizeUI.clearStyleAnswer(),i.parentNode.style.border="1px solid #f6bf08";var t=i.parentNode.querySelector(".quize-radio").value;Quize.checkedQuize(s,t)}QuizeUI.EmptyRadioButton()},show:function(e,n){QuizeUI.showTitleQuize(e,n),QuizeUI.showProgressQuize(e,n),QuizeUI.showRadioButtons(e,n),QuizeUI.EmptyRadioButton()},showForm:function(){document.querySelector(e.quizeLeft).innerHTML='\n        <div class="quize-form-container">\n          <div class="quize-form-icon">\n            <svg class="icon icon-done ">\n              <use xlink:href="svg/symbol/sprite.svg#done"></use>\n            </svg>\n          </div>\n\n          <div class="quize-form-title">\n            <h3>Отлично! Остался последний шаг.</h3>\n          </div>\n\n          <div class="quize-progress-bar">\n            <div class="quize-progress-bar-title">\n              <p>Готово: <span>95%</span></p>\n            </div>\n            <div class="quize-progress-bar-line">\n              <div class="progress">\n                <progress max="100" value="95"></progress>\n                <div class="progress-bg">\n                  <div class="progress-bar"></div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class="quize-form-wrap">\n            <div class="quize-form-left">\n              <p>\n                Чтобы получить доступ к результатам опроса и получить индивидуальную скидку введите контактный номер телефона:\n              </p>\n            </div>\n\n            <div class="quize-form-right">\n              <form class="quize-form">\n                <label>ВВЕДИТЕ ТЕЛЕФОН</label>\n                <input class="quize-form-phone" type="phone" placeholder="+7 (900) 000-00-00" required=\'\'>\n                <button type="submit" class="quize-form-button" onclick="yaCounter51160865.reachGoal(\'send_quiz\'); return true;">\n                  <span>\n                    <svg class="icon icon-qcheck">\n                      <use xlink:href="svg/symbol/sprite.svg#qcheck"></use>\n                    </svg>\n                  </span>\n\n                  <span>Получить скидку</span>\n                </button>\n                <div class="quize-form-policy">\n                  <p>\n                    Нажимая на кнопку "Получить скидку", я даю согласие на <a href="/policy.html" target="_blank">обработку персональных данных</a>\n                  </p>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      '},clearAnswers:function(){document.querySelector(e.quizeLeft).innerHTML='\n        <div class="quize-title">\n          <svg class="icon icon-qcheck-form ">\n            <use xlink:href="svg/symbol/sprite.svg#qcheck-form"></use>\n          </svg>\n          <h5>Пройдите тест и получите скидку до 10%!</h5>\n        </div>\n        <hr>\n        <div class="quize-question"></div>\n        <div class="quize-progress-bar">\n          <div class="quize-progress-bar-title">\n            <p>Готово: <span></span></p>\n          </div>\n          <div class="quize-progress-bar-line">\n            <div class="progress">\n              <progress max="100" value="0"></progress>\n              <div class="progress-bg">\n                <div class="progress-bar"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class="quize-answers-container">\n          <div class="quize-answers"></div>\n        </div>\n        <div class="quize-buttons">\n          <button class="quize-back">\n            <svg class="icon icon-qleft-arrow ">\n              <use xlink:href="svg/symbol/sprite.svg#qleft-arrow"></use>\n            </svg> Назад\n          </button>\n          <button class="quize-next">\n            <svg class="icon icon-qcheck ">\n              <use xlink:href="svg/symbol/sprite.svg#qcheck"></use>\n            </svg> Далее\n          </button>\n        </div>\n      '},closeQuizeInfo:function(){document.querySelector(e.quizeModalInfo).style.display="none"},openQuizeInfo:function(){document.querySelector(e.quizeModalInfo).style.display="block"}}}(),QuizeApp=function(e,n,i){var s=i.getSelectors(),o=function(e){var s=n.show(),o=s.quizeIndex+e;0===o&&(n.updateQuizeIndex(e),i.show(s.quizes,o),i.hideButtonBack()),o>=1&&o<s.quizes.length&&(n.updateQuizeIndex(e),i.show(s.quizes,o),i.showButtonBack()),o===s.quizes.length&&(i.showForm(),t()),c()},t=function(){document.querySelector(s.quizeForm).addEventListener("submit",function(s){return function(s){s.preventDefault();var t=n.show(),a=i.getSelectors(),d=document.querySelector(a.quizePhone).value;i.closeModalQuize(),i.openQuizeInfo(),setTimeout(function(){i.closeQuizeInfo()},5e3),e.email(t,d),e.sms(d),n.clearAllData(),i.clearAnswers(),o(0),c(),r(),u()}(s)})},r=function(){document.querySelector(s.nextButtonQuiz).addEventListener("click",function(){return o(1)})},u=function(){document.querySelector(s.backButtonQuiz).addEventListener("click",function(){return o(-1)})},c=function(){for(var e=document.querySelectorAll(s.quizeAnswer),n=0;n<e.length;n++)e[n].addEventListener("click",i.borderColorRadioButton)};return{init:function(){var e=n.show(),o=e.quizeIndex;i.show(e.quizes,o),function(){for(var e=document.querySelectorAll(s.sliderButtons),n=0;n<e.length;n++)e[n].addEventListener("click",i.openModalQuize);document.querySelector(s.closeModalQuiz).addEventListener("click",i.closeModalQuize),document.querySelector(s.closeModalQuiz).addEventListener("click",i.closeModalQuize),document.querySelector(s.quizeInfo).addEventListener("click",i.closeQuizeInfo),c(),r(),u()}()}}}(Sender,Quize,QuizeUI);QuizeApp.init();